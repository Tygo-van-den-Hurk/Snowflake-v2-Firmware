// Copyright (c) 2025 - Tygo van den Hurk
// SPDX-License-Identifier: ELP-2.0

#include QMK_KEYBOARD_H

#include "snowflake_process_detected_host_os_kb.h"
#include "snowflake_keyboard_post_init_user.h"
#include "snowflake_process_custom_keycodes.h"
#include "snowflake_process_record_user.h"
#include "snowflake_tap_dance_actions.h"
#include "snowflake_dynamic_macros.h"
#include "snowflake_key_override.h"
#include "snowflake_aliases.h"
#include "snowflake_layers.h"

/**
 * @brief The actual keys and layers this keyboard has. This is the complete 
 * keymap.
 *
 * This keymap includes home row modifiers. This means that if you hold keys
 * on the middle rows they act as modifiers. From center to outer we have:
 * Nav (󰎐), Shift (󰘶), Command (󰘳), Alt (󰘵), Control (󰘴).
 * 
 * On MacOS Command (󰘳) and Control (󰘴) are swapped automagically to keep
 * muscle memory consistent. Combinations with arrow keys are also
 * automagically remapped to their Windows/Linux Counterparts.
 * 
 * If this does not make sense, try combining the arrow keys with modifiers
 * like Shift (󰘶), Command (󰘳), Alt (󰘵) and see what this does. This works 
 * best in a large text document.
 */
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

  /*
   * ┌───┬───┬───┬───┬───┐       ┌───┬───┬───┬───┬───┐
   * │ Q │ W │ E │ R │ T │       │ Y │ U │ I │ O │ P │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │ A │ S │ D │ F │ G │       │ H │ J │ K │ L │ ; │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │ Z │ X │ C │ V │ B │       │ N │ M │ , │ . │ / │
   * └───┴───┴───┴───┴───┘       └───┴───┴───┴───┴───┘
   *           ┌───┐                   ┌───┐
   *           │ 󰁮 ├───┐           ┌───┤ 󰹾 │
   *           └───┤ 󱁐 ├───┐   ┌───┤ 󱞥 ├───┘
   *               └───┤ 󰞔 │   │ 󱊷 ├───┘
   *                   └───┘   └───┘
   */
  [SNOWFLAKE_LAYER_QWERTY] = LAYOUT_split_3x5_3(
      //
      //                                Left Half                                                                   Right Half
      /* ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
      */       _Q_     ,     _W_     ,     _E_     ,     _R_     ,     _T_     ,            _Y_     ,     _U_     ,     _I_     ,     _O_     ,     _P_     ,
      /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
      */   LGUI_T(_A_) , LALT_T(_S_) , LCTL_T(_D_) , LSFT_T(_F_) ,     _G_     ,            _H_     , RSFT_T(_J_) , RCTL_T(_K_) , RALT_T(_L_) , RGUI_T(_O_) ,
      /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
      */       _Z_     ,     _X_     ,     _C_     ,     _V_     ,     _B_     ,            _N_     ,     _M_     ,   _COMMA_   ,    _DOT_    ,   _SLASH_   ,
      /* └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
      */
      /*                             ┌─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┐
      */                                 _B_SPC_   ,   _SPACE_   ,    _TAB_    ,           _ESC_    ,   _ENTER_   ,    _DEL_
      /*                             └─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┘
      */
  ),

  /**
   * ┌───┬───┬───┬───┬───┐       ┌───┬───┬───┬───┬───┐
   * │ , │ W │ F │ P │ G │       │ J │ L │ U │ Y │ ; │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │ A │ R │ S │ T │ D │       │ H │ N │ E │ I │ O │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │ . │ X │ C │ V │ B │       │ K │ M │ Q │ Z │ / │
   * └───┴───┴───┴───┴───┘       └───┴───┴───┴───┴───┘
   *           ┌───┐                   ┌───┐
   *           │ 󰁮 ├───┐           ┌───┤ 󰹾 │
   *           └───┤ 󱁐 ├───┐   ┌───┤ 󱞥 ├───┘
   *               └───┤ 󰞔 │   │ 󱊷 ├───┘
   *                   └───┘   └───┘
   */
  [SNOWFLAKE_LAYER_COLMAK] = LAYOUT_split_3x5_3(
    //
    //                                Left Half                                                                   Right Half
    /* ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
    */     _COMMA_   ,     _W_     ,     _F_     ,     _P_     ,     _G_     ,            _J_     ,     _L_     ,     _U_     ,     _Y_     ,   _SEM_C_   ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */   LGUI_T(_A_) , LALT_T(_R_) , LCTL_T(_S_) , LSFT_T(_T_) ,  _NAV(_D_)  ,         _NAV(_H_)  , RSFT_T(_N_) , RCTL_T(_E_) , RALT_T(_I_) , RGUI_T(_O_) ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */      _DOT_    ,     _X_     ,     _C_     ,     _V_     ,     _B_     ,            _K_     ,     _M_     ,     _Q_     ,     _Z_     ,   _SLASH_   ,
    /* └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
    */
    /*                             ┌─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┐
    */                                 _B_SPC_   ,   _SPACE_   ,    _TAB_    ,           _ESC_    ,   _ENTER_   ,    _DEL_
    /*                             └─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┘
    */
  ),

  /**
   * ┌───┬───┬───┬───┬───┐       ┌───┬───┬───┬───┬───┐
   * │   │   │   │   │   │       │   │   │   │   │   │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │ 1 │ 2 │ 3 │ 4 │ 5 │       │ 6 │ 7 │ 8 │ 9 │ 0 │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │   │   │   │   │   │       │   │   │   │   │   │
   * └───┴───┴───┴───┴───┘       └───┴───┴───┴───┴───┘
   *           ┌───┐                   ┌───┐
   *           │ 󰁮 ├───┐           ┌───┤ 󰹾 │
   *           └───┤ 󱁐 ├───┐   ┌───┤ 󱞥 ├───┘
   *               └───┤ 󰞔 │   │ 󱊷 ├───┘
   *                   └───┘   └───┘
   */
  [SNOWFLAKE_LAYER_NUMBERS] = LAYOUT_split_3x5_3(
    //
    //                                Left Half                                                                   Right Half
    /* ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
    */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */   LGUI_T(_1_) , LALT_T(_2_) , LCTL_T(_3_) , LSFT_T(_4_) ,  _NAV(_5_)  ,         _NAV(_6_)  , RSFT_T(_7_) , RCTL_T(_8_) , RALT_T(_9_) , RGUI_T(_0_) ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
    /* └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
    */
    /*                             ┌─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┐
    */                                 _B_SPC_   ,   _SPACE_   ,    _TAB_    ,           _ESC_    ,   _ENTER_   ,    _DEL_
    /*                             └─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┘
    */
  ),

  /**
   * ┌───┬───┬───┬───┬───┐       ┌───┬───┬───┬───┬───┐
   * │   │   │   │   │   │       │   │   │   │   │   │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │ < │ { │ [ │ ( │ \ │       │ / │ ) │ ] │ } │ > │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │   │   │   │   │   │       │   │   │   │   │   │
   * └───┴───┴───┴───┴───┘       └───┴───┴───┴───┴───┘
   *           ┌───┐                   ┌───┐
   *           │ 󰁮 ├───┐           ┌───┤ 󰹾 │
   *           └───┤ 󱁐 ├───┐   ┌───┤ 󱞥 ├───┘
   *               └───┤ 󰞔 │   │ 󱊷 ├───┘
   *                   └───┘   └───┘
   */
  [SNOWFLAKE_LAYER_BRACKETS] = LAYOUT_split_3x5_3(
    //
    //                                Left Half                                                                   Right Half
    /* ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
    */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */      _L_T_    ,   _L_CBR_   ,   _L_BRC_   ,   _L_PRN_   ,   _B_SLS_   ,          _SLASH_   ,   _R_PRN_   ,   _R_BRC_   ,   _R_CBR_   ,    _G_T_    ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
    /* └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
    */
    /*                             ┌─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┐
    */                                 _B_SPC_   ,   _SPACE_   ,    _TAB_    ,           _ESC_    ,   _ENTER_   ,    _DEL_
    /*                             └─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┘
    */
  ),

  /**
   * 
   * Single tap: 'Move focus  to'
   * Double tap: 'Move window to'
   * 
   *             ┌───┬───┬───┬───┬───┐       ┌───┬───┬───┬───┬───┐
   * Windows:    │ 1 │ 2 │ 3 │ 4 │ 5 │       │ 6 │ 7 │ 8 │ 9 │ 0 │
   *             ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * Workspaces: │ 1 │ 2 │ 3 │ 4 │ 5 │       │ 6 │ 7 │ 8 │ 9 │ 0 │
   *             ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * Displays:   │ 1 │ 2 │ 3 │ 4 │ 5 │       │ 6 │ 7 │ 8 │ 9 │ 0 │
   *             └───┴───┴───┴───┴───┘       └───┴───┴───┴───┴───┘
   *                       ┌───┐                   ┌───┐
   *                       │ 󰁮 ├───┐           ┌───┤ 󰹾 │
   *                       └───┤ 󱁐 ├───┐   ┌───┤ 󱞥 ├───┘
   *                           └───┤ 󰞔 │   │ 󱊷 ├───┘
   *                               └───┘   └───┘
   */
  [SNOWFLAKE_LAYER_NAVIGATION] = LAYOUT_split_3x5_3(
    //
    //                                Left Half                                                                   Right Half
    /* ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
    */   TD(TD_WIN1) , TD(TD_WIN2) , TD(TD_WIN3) , TD(TD_WIN4) , TD(TD_WIN5) ,        TD(TD_WIN6) , TD(TD_WIN7) , TD(TD_WIN8) , TD(TD_WIN9) , TD(TD_WIN0) ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */   TD(TD_WSP1) , TD(TD_WSP2) , TD(TD_WSP3) , TD(TD_WSP4) , TD(TD_WSP5) ,        TD(TD_WSP6) , TD(TD_WSP7) , TD(TD_WSP8) , TD(TD_WSP9) , TD(TD_WSP0) ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */   TD(TD_DIS1) , TD(TD_DIS2) , TD(TD_DIS3) , TD(TD_DIS4) , TD(TD_DIS5) ,        TD(TD_DIS6) , TD(TD_DIS7) , TD(TD_DIS8) , TD(TD_DIS9) , TD(TD_DIS0) ,
    /* └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
    */
    /*                             ┌─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┐
    */                                 _B_SPC_   ,   _SPACE_   ,    _TAB_    ,           _ESC_    ,   _ENTER_   ,    _DEL_
    /*                             └─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┘
    */
  ),

  /**
   * ┌───┬───┬───┬───┬───┐       ┌───┬───┬───┬───┬───┐
   * │   │   │   │   │   │       │   │   │   │   │   │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │ 󰘳 │ 󰘵 │ 󰘴 │ 󰘶 │   │       │   │  │  │  │  │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │   │   │   │   │   │       │   │   │   │   │   │
   * └───┴───┴───┴───┴───┘       └───┴───┴───┴───┴───┘
   *           ┌───┐                   ┌───┐
   *           │ 󰁮 ├───┐           ┌───┤ 󰹾 │
   *           └───┤ 󱁐 ├───┐   ┌───┤ 󱞥 ├───┘
   *               └───┤ 󰞔 │   │ 󱊷 ├───┘
   *                   └───┘   └───┘
   */
  [SNOWFLAKE_LAYER_ARROWS] = LAYOUT_split_3x5_3(
    //
    //                                Left Half                                                                   Right Half
    /* ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
    */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */   LGUI_T(___) , LALT_T(___) , LCTL_T(___) , LSFT_T(___) ,     ___     ,            ___     ,   _LEFT__   ,   _DOWN__   ,   __UP___   ,   _RIGHT_   ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
    /* └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
    */
    /*                             ┌─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┐
    */                                 _B_SPC_   ,   _SPACE_   ,    _TAB_    ,           _ESC_    ,   _ENTER_   ,    _DEL_
    /*                             └─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┘
    */
  ),

  /**
   * ┌───┬───┬───┬───┬───┐       ┌───┬───┬───┬───┬───┐
   * │  │  │  │ 󰑋 │ 󰑋 │       │   │   │   │   │   │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │ ' │ ` │ - │ = │ 󰙦 │       │   │ 󰘶 │ 󰘴 │ 󰘵 │ 󰘳 │
   * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
   * │  │  │  │ 󰐌 │ 󰐌 │       │   │   │   │   │   │
   * └───┴───┴───┴───┴───┘       └───┴───┴───┴───┴───┘
   *           ┌───┐                   ┌───┐
   *           │ 󰁮 ├───┐           ┌───┤ 󰹾 │
   *           └───┤ 󱁐 ├───┐   ┌───┤ 󱞥 ├───┘
   *               └───┤ 󰞔 │   │ 󱊷 ├───┘
   *                   └───┘   └───┘
   * 
   * Swap Control and Command: 
   * 
   * Browser back: 
   * Browser forward: 
   * 
   * Macro Stop: 󰙦
   * Macro Play: 󰐌
   * Macro Record: 󰑋
   * 
   */
  [SNOWFLAKE_LAYER_MISCELLANEOUS] = LAYOUT_split_3x5_3(
    //
    //                                Left Half                                                                   Right Half
    /* ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
    */    _WWW_BCK_  ,  _WWW_FWD_  ,   CG_TOGG   , _MACRO_R_1_ , _MACRO_R_2_ ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */     _QUOTE_   ,   _GRAVE_   ,   _MINUS_   ,   _EQUAL_   , _MACRO_STOP ,            ___     , LSFT_T(___) , LCTL_T(___) , LALT_T(___) , LGUI_T(___) ,
    /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    */     _VOL_D_   ,   _MEDIA_   ,   _VOL_U_   , _MACRO_P_1_ , _MACRO_P_2_ ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
    /* └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
    */
    /*                             ┌─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┐
    */                                 _B_SPC_   ,   _SPACE_   ,    _TAB_    ,           _ESC_    ,   _ENTER_   ,    _DEL_
    /*                             └─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┘
    */
  ),

  // /**
  //  * ┌───┬───┬───┬───┬───┐       ┌───┬───┬───┬───┬───┐
  //  * │   │   │   │   │   │       │   │   │   │   │   │
  //  * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
  //  * │   │   │   │   │   │       │   │   │   │   │   │
  //  * ├───┼───┼───┼───┼───┤       ├───┼───┼───┼───┼───┤
  //  * │   │   │   │   │   │       │   │   │   │   │   │
  //  * └───┴───┴───┴───┴───┘       └───┴───┴───┴───┴───┘
  //  *           ┌───┐                   ┌───┐
  //  *           │ 󰁮 ├───┐           ┌───┤ 󰹾 │
  //  *           └───┤ 󱁐 ├───┐   ┌───┤ 󱞥 ├───┘
  //  *               └───┤ 󰞔 │   │ 󱊷 ├───┘
  //  *                   └───┘   └───┘
  //  */
  // [EMPTY] = LAYOUT_split_3x5_3(
  //   //
  //   //                                Left Half                                                                   Right Half
  //   /* ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┬─────────────┬─────────────┐
  //   */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
  //   /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
  //   */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
  //   /* ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤      ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
  //   */       ___     ,     ___     ,     ___     ,     ___     ,     ___     ,            ___     ,     ___     ,     ___     ,     ___     ,     ___     ,
  //   /* └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┴─────────────┴─────────────┘
  //   */
  //   /*                             ┌─────────────┬─────────────┬─────────────┐      ┌─────────────┬─────────────┬─────────────┐
  //   */                                 _B_SPC_   ,   _SPACE_   ,    _TAB_    ,           _ESC_    ,   _ENTER_   ,    _DEL_
  //   /*                             └─────────────┴─────────────┴─────────────┘      └─────────────┴─────────────┴─────────────┘
  //   */
  // ),
  
};
